From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Michael Hoyle <mikehoyle@google.com>
Date: Fri, 19 Mar 2021 12:57:48 -0700
Subject: ANDROID: Add GKI_HIDDEN_MM_CONFIGS to support ballooning.

Bug: 183227346
Signed-off-by: Michael Hoyle <mikehoyle@google.com>
Change-Id: I67ab3cd12ee5925a941af2509ec1eef1fac07b86
---
 init/Kconfig.gki | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/init/Kconfig.gki b/init/Kconfig.gki
--- a/init/Kconfig.gki
+++ b/init/Kconfig.gki
@@ -200,6 +200,14 @@ config GKI_HIDDEN_PHY_CONFIGS
 	  Dummy config option used to enable the hidden PHY configs,
 	  required by various SoC platforms.
 
+config GKI_HIDDEN_MM_CONFIGS
+	bool "Hidden MM configuration needed for GKI"
+	select PAGE_REPORTING
+	select BALLOON_COMPACTION
+	select MEMORY_BALLOON
+	help
+	  Dummy config option used to enable hidden MM configs,
+	  currently required for VIRTIO_BALLOON
 
 # Atrocities needed for
 # a) building GKI modules in separate tree, or
@@ -229,6 +237,7 @@ config GKI_HACKS_TO_FIX
 	select GKI_HIDDEN_HYPERVISOR_CONFIGS
 	select GKI_HIDDEN_NET_CONFIGS
 	select GKI_HIDDEN_PHY_CONFIGS
+	select GKI_HIDDEN_MM_CONFIGS
 	help
 	  Dummy config option used to enable core functionality used by
 	  modules that may not be selectable in this config.
