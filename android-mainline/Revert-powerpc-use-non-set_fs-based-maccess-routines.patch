From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Greg Kroah-Hartman <gregkh@google.com>
Date: Tue, 27 Oct 2020 10:20:23 +0100
Subject: Revert "powerpc: use non-set_fs based maccess routines"

This reverts commit c33165253492b91337f88c84b11733a4a2d55b60.

Bug: 171770067
Signed-off-by: Greg Kroah-Hartman <gregkh@google.com>
Change-Id: I737b38f95b9c2a8d53ac0a341386553fc1677f1b
---
 arch/powerpc/include/asm/uaccess.h | 16 ----------------
 1 file changed, 16 deletions(-)

diff --git a/arch/powerpc/include/asm/uaccess.h b/arch/powerpc/include/asm/uaccess.h
--- a/arch/powerpc/include/asm/uaccess.h
+++ b/arch/powerpc/include/asm/uaccess.h
@@ -604,20 +604,4 @@ do {									\
 		__put_user_goto(*(u8*)(_src + _i), (u8 __user *)(_dst + _i), e);\
 } while (0)
 
-#define HAVE_GET_KERNEL_NOFAULT
-
-#define __get_kernel_nofault(dst, src, type, err_label)			\
-do {									\
-	int __kr_err;							\
-									\
-	__get_user_size_allowed(*((type *)(dst)), (__force type __user *)(src),\
-			sizeof(type), __kr_err);			\
-	if (unlikely(__kr_err))						\
-		goto err_label;						\
-} while (0)
-
-#define __put_kernel_nofault(dst, src, type, err_label)			\
-	__put_user_size_goto(*((type *)(src)),				\
-		(__force type __user *)(dst), sizeof(type), err_label)
-
 #endif	/* _ARCH_POWERPC_UACCESS_H */
